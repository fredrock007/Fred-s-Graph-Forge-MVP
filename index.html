<!DOCTYPE html><html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fred's GraphForge MVP</title>
  <style>
    body{margin:0;background:#0b0f14;color:#e8eef6;font-family:Inter,system-ui,sans-serif}
    .wrap{display:grid;grid-template-columns:360px 1fr;gap:16px;padding:16px;height:100vh;box-sizing:border-box}
    .card{background:#121821;border:1px solid #1f2633;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,.35);padding:16px;overflow:auto}
    h1{font-size:18px;margin:0 0 8px}
    label{font-size:13px;color:#98a3b3;display:block;margin-top:8px}
    input,select,button{width:100%;padding:8px;border-radius:8px;border:1px solid #2a3242;background:#0f141c;color:#e8eef6;margin-top:4px}
    button{cursor:pointer;background:linear-gradient(135deg,#4cc9f0,#5ee6a7);color:#041014;font-weight:700;border:none}
    #featuresBox{margin-top:12px;padding:8px;border-radius:8px;background:#0e1520;border:1px solid #283246;font-size:13px}
    .plot{position:relative}
    .watermark{position:absolute;bottom:8px;right:8px;font-size:11px;color:rgba(150,210,255,.5)}
    @media(max-width:900px){.wrap{grid-template-columns:1fr;height:auto}}
  </style>
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#0a0f16" />
  <link rel="apple-touch-icon" href="icon-192.png" />
</head>
<body>
  <div class="wrap">
    <section class="card left">
      <div class="brand">
        <div class="logo"><span>F</span><div class="orbit-dot"></div></div>
        <div>
          <div class="title">Fred's GraphForge MVP</div>
          <div class="subtitle">Offline Graphing â€¢ Feature Detection</div>
        </div>
      </div><div>
    <h2>Equation</h2>
    <label for="expr">Enter f(x) (examples: x^2 - 4x - 6, sin(x), (x+2)/(x-3), e^(0.5x))</label>
    <input id="expr" type="text" placeholder="x^2 - 4x - 6" value="x^2 - 4x - 6" />
    <div class="hint">Supported: + - * / ^ ( )  sin cos tan asin acos atan exp log ln sqrt abs pi e</div>
  </div>

  <div class="grid-2">
    <div>
      <h2>Domain</h2>
      <label for="xmin">x min</label>
      <input id="xmin" type="number" step="0.5" value="-10" />
    </div>
    <div style="padding-top:24px">
      <label for="xmax">x max</label>
      <input id="xmax" type="number" step="0.5" value="10" />
    </div>
  </div>

  <div class="grid-2">
    <div>
      <h2>Sampling</h2>
      <label for="points">Sample points</label>
      <input id="points" type="number" step="50" value="800" />
    </div>
    <div style="padding-top:24px">
      <label for="angleMode">Angle mode (for trig)</label>
      <select id="angleMode">
        <option value="rad">Radians</option>
        <option value="deg">Degrees</option>
      </select>
    </div>
  </div>

  <div class="grid-2">
    <label class="badge"><input id="showRoots" type="checkbox" checked/> Roots</label>
    <label class="badge"><input id="showTurning" type="checkbox" checked/> Turning points</label>
  </div>
  <div class="grid-2">
    <label class="badge"><input id="showAsym" type="checkbox" checked/> Asymptotes</label>
    <label class="badge"><input id="autoY" type="checkbox" checked/> Auto y-range</label>
  </div>

  <button id="plotBtn" class="btn">Plot & Analyse</button>

  <div class="features" id="featuresBox" aria-live="polite"></div>

  <div class="footer">Built for offline classrooms. Save libraries locally to run with no data.</div>
</section>

<section class="card plot">
  <div id="plot" style="height: calc(100vh - 52px);"></div>
  <div class="watermark">Fred's GraphForge MVP</div>
</section>

  </div>
    </section><section class="card plot">
  <div id="plot" style="height: calc(100vh - 52px);"></div>
  <div class="watermark">Fred's GraphForge MVP</div>
</section>

  </div>  <script src="https://cdn.jsdelivr.net/npm/mathjs@11.11.2/lib/browser/math.min.js"></script>  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>  <script>
    // (JS helpers, analyse, draw function from previous version remain here)
    // ... full JS code you already have above ...
  </script>  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(console.error);
      });
    }
  </script>  <!-- (rest of file with sw.js, manifest, icons unchanged) --></body>
</html>
